"use strict";(self.webpackJsonpRuntime=self.webpackJsonpRuntime||[]).push([[241],{8241:(e,n,t)=>{t.r(n),t.d(n,{cohortId:()=>U,sendPerformanceMetrics:()=>L});var i=t(8468),r=t(9934),o=t.n(r),a=t(4150),s=t.n(a),l=t(2206),c=t.n(l),u=t(845),d=t.n(u),g=t(7226),p=t(9978),w=t.n(p);const h=1e-6,v=1e-6,m=e=>w()(e)?"unknown":e;function f({device:e=null,connectionType:n=null,connectionSpeed:t=null,viewportWidth:i=null,viewportHeight:r=null,hasCriticalCss:o=null,hasCustomWidgets:a=null,browserName:s=null,browserVersion:l=null,os:c=null,firstVisit:u=null,pageUuid:d=null,serviceWorkerRunning:g=null,siteAlias:p=null,host:w=null,path:f=null,vital:{name:y=null,delta:C=null,value:b=null}}){return{device:e,connectionType:m(n),connectionSpeed:m(t),viewportWidth:i,viewportHeight:r,hasCriticalCss:o,hasCustomWidgets:a,browserName:s,browserVersion:l,os:c,firstVisit:u,pageUuid:d,serviceWorkerRunning:g,siteAlias:p,host:m(w),path:f,[y?.toLowerCase()]:C||v,[`${y?.toLowerCase()}_value`]:b||h,[`${y?.toLowerCase()}_delta`]:C||v}}function y({cohortId:e,vital:n}){return{message:"web vitals logging",metric:n?.name||"N/A",eventTarget:n?.attribution?.eventTarget||"N/A",value:n?.value||"N/A",rating:n?.rating||"N/A",eventType:n?.attribution?.eventType||"N/A",isGtmEnabled:!!window.google_tag_manager,layoutId:window?.Parameters?.LayoutID||"N/A",...n||{}}}var C=t(7108),b=t.n(C),A=t(9991),N=t.n(A),P=t(5617),_=t(4272);const T=c()(null),W=e=>T(e,window),k=e=>!!document.querySelector(e),I=function({apiUrl:e=(0,_.D)("runtimecollector.url")}={}){return async n=>{if(!e)throw new Error("Missing endpoint for runtimecollector");return await fetch(`${e}/performance/metrics`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(n),keepalive:!0}).catch((e=>{P.C_.warn({message:"Error while trying to report Vitals to BI",_skipJournal:!0,error:d()(e)?e.toString():JSON.stringify(e),siteAlias:N()("siteAlias",n),pageUrl:N()("_currentPage.pageUrl",window)})}))}}(),S=b()((e=>P.C_.info(e)),15),U=(window?.sessionStorage??window)._cohortId=Math.random()<.5?0:1,V=(...e)=>n=>e.reduce(((e,n)=>e.then(((...e)=>Promise.resolve().then(n.bind(null,...e))))),Promise.resolve(n)),R=({name:e,value:n,rating:t})=>"INP"===e&&"poor"===t,H=async function(){const e=W("_currentDevice"),n=W("navigator.connection.type"),t=W("navigator.connection.effectiveType"),r=W("Parameters.SiteAlias"),o=W("window.location.host"),a=W("location.pathname"),l=k("#criticalCss"),c=k('[data-element-type="custom_extension"]'),u=W("innerWidth"),g=W("innerHeight"),p=["_currentPage.pageContent.uuid","Parameters.InitialPageUuid"].map((e=>T(e,window))).filter(Boolean).at(0),{name:w=null,version:h=null,os:v=null}=(0,i.o0)(),[m,f]=await async function(){const e=await(e=>{const n=s()((()=>navigator.serviceWorker.getRegistration("/")));return d()(n)?null:n})();return[!e?.active,!!e]}();return{device:e,connectionType:n,connectionSpeed:t,viewportWidth:u,viewportHeight:g,hasCriticalCss:l,hasCustomWidgets:c,browserName:w,browserVersion:h,os:v,firstVisit:m,serviceWorkerRunning:f,pageUuid:p,siteAlias:r,host:o,path:a,cohortId:U}},J=function(e){return H().then(o()({vital:e}))};async function L({sendLog:e=!0}={}){const n=[V(J,f,I),async n=>{if(e&&R(n))return V(J,y,S)(n)}].filter(Boolean);[g.IN,g.Ck,e=>(0,g.rH)(e,{durationThreshold:0,reportAllChanges:!0}),g.lt,g.fK,g.zB].forEach((e=>e((e=>{Promise.all(n.map((n=>n(e).catch(console.warn))))}))))}}}]);